@if (cartsidebarService.isOpen()) {
  <div
    class="cr-cart-overlay w-full h-screen hidden fixed z-10 top-0 left-0 bg-[#000000b3]"
    style="display: block"
  ></div>

  <div
    class="cr-cart-view h-full fixed top-0 right-[-350px] z-20 transition-all duration-[0.4s] ease text-black cr-cart-view-active"
  >
    <div
      class="cr-cart-inner w-[350px] h-full m-0 px-[20px] bg-white relative z-9 flex flex-col justify-between max-[576px]:w-[300px] max-[360px]:w-[280px]"
    >
      <div class="cr-cart-top">
        <div
          class="cr-cart-title mb-[15px] py-[15px] flex flex-row justify-between items-center border-b border-solid border-[#e9e9e9]"
        >
          <h6 class="m-0 text-[17px] font-bold text-[#2b2b2d] leading-[1.2]">Mi carrito</h6>
          <button
            type="button"
            (click)="cartsidebarService.close()"
            class="close-cart text-[#fb5555] text-[20px] font-extrabold bg-none border-0"
          >
            ×
          </button>
        </div>
        <ul class="crcart-pro-items">
          @for (product of productsInCart(); track product.id) {
            <li
              class="mb-[20px] pb-[20px] flex overflow-hidden border-b border-solid border-[#e9e9e9]"
            >
              <a href="product-left-sidebar.html" class="crside_pro_img m-auto grow basis-[20%]">
                <img
                  [src]="
                    `https://maraviyainfotech.com/projects/carrot-tailwind/assets/${product.image}`
                  "
                  alt="product-1"
                  class="max-w-full rounded-[5px]"
                />
              </a>
              <div class="cr-pro-content pl-[15px] relative grow basis-[70%] overflow-hidden">
                <a
                  href="product-left-sidebar.html"
                  class="cart_pro_title w-full pr-[30px] whitespace-normal overflow-hidden text-ellipsis block text-[15px] leading-[18px] font-normal"
                  >{{ product.name }}</a
                >
                <span class="cart-price mt-[5px] text-[14px] block"
                  ><span class="text-[#777] font-bold text-[16px]">{{ product.price }}</span> x
                  10kg</span
                >
                <div class="cr-cart-qty mt-[5px]">
                  <div
                    class="cart-qty-plus-minus m-0 w-[80px] h-[30px] relative overflow-hidden flex bg-white border border-solid border-[#e9e9e9] rounded-[5px] items-center justify-between"
                  >
                    <button
                      type="button"
                      (click)="addQuantity({ product })"
                      class="plus h-[25px] w-[25px] mt-[-2px] border-0 bg-transparent flex justify-center items-center"
                    >
                      +
                    </button>
                    <input
                      type="text"
                      placeholder="."
                      value="1"
                      minlength="1"
                      maxlength="20"
                      class="quantity w-[30px] m-0 p-0 text-[#444] float-left text-[14px] font-semibold leading-[38px] h-auto text-center outline-0"
                      [value]="product.quantity"
                    />
                    <button
                      type="button"
                      (click)="restQuantity({ product })"
                      class="minus h-[25px] w-[25px] mt-[-2px] border-0 bg-transparent flex justify-center items-center"
                    >
                      -
                    </button>
                  </div>
                </div>
                <a
                  href="javascript:void(0)"
                  class="remove py-0 px-[9px] absolute top-0 right-0 text-[17px] leading-[15px] bg-white text-[#fb5555]"
                  >×</a
                >
              </div>
            </li>
          }
        </ul>
      </div>
      <div class="cr-cart-bottom relative top-[-20px]">
        <div
          class="cart-sub-total mt-[20px] mb-[10px] pt-0 pb-[8px] flex flex-wrap justify-between border-t border-solid border-[#e9e9e9]"
        >
          <table class="table cart-table mt-[10px] w-full">
            <tbody>
              <tr>
                <td class="text-left text-[16px] text-black font-normal py-[7px]">Total :</td>
                <td class="text-right text-[15px] text-black font-bold py-[7px]">
                  S/{{ totalProducts().toFixed(2) }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="cart_btn flex justify-between">
          <a
            href="cart.html"
            class="cr-button h-[40px] font-bold transition-all duration-300 ease-in-out py-[8px] px-[22px] text-[14px] font-Manrope capitalize leading-[1.2] bg-[#64b496] text-white border border-solid border-[#64b496] rounded-[5px] flex items-center justify-center hover:bg-black hover:border-black"
            >View Cart</a
          >
          <a
            href="checkout.html"
            class="cr-btn-secondary h-[40px] font-bold transition-all duration-300 ease-in-out py-[8px] px-[22px] text-[14px] font-Manrope capitalize leading-[1.2] bg-white text-[#64b496] border border-solid border-[#64b496] rounded-[5px] flex items-center justify-center hover:text-white hover:bg-[#64b496] hover:border-[#64b496]"
            >Checkout</a
          >
        </div>
      </div>
    </div>
  </div>
}
